--- Running Auto-Migration (migrate_auth_fix.js) ---
[AUTH MIGRATION] Starting on DB: driverflow.db 
ℹ️  drivers.verified exists
ℹ️  drivers.verification_token exists
ℹ️  drivers.verification_expires exists
ℹ️  drivers.reset_token exists
ℹ️  drivers.reset_expires exists
ℹ️  drivers.status exists
ℹ️  drivers.search_status exists
ℹ️  drivers.estado exists
ℹ️  drivers.created_at exists
ℹ️  empresas.verified exists
ℹ️  empresas.verification_token exists
ℹ️  empresas.verification_expires exists
ℹ️  empresas.reset_token exists
ℹ️  empresas.reset_expires exists
ℹ️  empresas.search_status exists
ℹ️  empresas.created_at exists
ℹ️  empresas.legal_name exists
ℹ️  empresas.address_line1 exists
ℹ️  empresas.city exists
ℹ️  empresas.failed_attempts exists
ℹ️  empresas.lockout_until exists
ℹ️  drivers.failed_attempts exists
ℹ️  drivers.lockout_until exists
ℹ️  events_outbox.ticket_id exists
[AUTH MIGRATION] Completed Successfully.
--- Migration Complete ---
{"ts":"2026-01-26T13:30:32.761Z","level":"INFO","msg":"--- Email Processor Started ---","event":"worker_start"}
{"ts":"2026-01-26T13:30:32.761Z","level":"INFO","msg":"DB Config","event":"worker_config","db_path":"driverflow.db ","dry_run":false}
{"ts":"2026-01-26T13:30:32.764Z","level":"INFO","msg":"DB Check OK","event":"db_open_ok","count":65}
--- Starting Integrated Email Worker ---
{"ts":"2026-01-26T13:30:32.764Z","level":"INFO","msg":"Worker polling started","event":"worker_loop_start","interval_ms":30000}
{"ts":"2026-01-26T13:30:32.764Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:30:32.765Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
DriverFlow MVP server listening on port 3000
{"ts":"2026-01-26T13:30:40.337Z","level":"INFO","msg":"HTTP Request","request_id":"456d961a-f954-4e59-9981-5e802d5df894","route":"/healthz","method":"GET","status":200,"duration_ms":"5.22","event":"http_request"}
{"ts":"2026-01-26T13:30:40.343Z","level":"INFO","msg":"HTTP Request","request_id":"e22740ef-f89e-41ea-8827-9792bbc75d73","route":"/readyz","method":"GET","status":200,"duration_ms":"2.72","event":"http_request"}
{"ts":"2026-01-26T13:30:40.346Z","level":"INFO","msg":"HTTP Request","request_id":"bead95f0-8fcc-45d4-b9f4-c47e91537024","route":"/metrics","method":"GET","status":200,"duration_ms":"0.65","event":"http_request"}
{"ts":"2026-01-26T13:30:40.347Z","level":"INFO","msg":"HTTP Request","request_id":"b35fd745-397b-4c76-b0a6-6988fdc8c375","route":"/metrics","method":"GET","status":200,"duration_ms":"0.34","event":"http_request"}
{"ts":"2026-01-26T13:31:02.775Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:31:02.775Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:31:32.778Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:31:32.779Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:32:02.791Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:32:02.792Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:32:32.798Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:32:32.798Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:33:02.806Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:33:02.807Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:33:32.817Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:33:32.818Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:34:02.825Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:34:02.825Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:34:32.838Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:34:32.838Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:35:02.850Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:35:02.850Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:35:32.864Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:35:32.864Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:36:02.866Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:36:02.867Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:36:32.877Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:36:32.877Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:37:02.890Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:37:02.890Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:37:32.903Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:37:32.904Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:38:02.919Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:38:02.919Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:38:32.933Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:38:32.933Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:39:02.946Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:39:02.947Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:39:32.959Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:39:32.959Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:40:02.976Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:40:02.976Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:40:32.983Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:40:32.984Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:41:02.990Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:41:02.990Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:41:33.002Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:41:33.002Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
{"ts":"2026-01-26T13:42:03.012Z","level":"INFO","msg":"Worker Poll","event":"worker_poll","pending_count":6}
{"ts":"2026-01-26T13:42:03.012Z","level":"INFO","msg":"Processing 6 events...","event":"worker_poll_batch","count":6}
